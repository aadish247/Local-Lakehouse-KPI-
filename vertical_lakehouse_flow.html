<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>One‑Page Vertical Flow — Local Lakehouse Project</title>
<style>
  :root{
    --bg:#0b1022; --panel:#0f172a; --ink:#e5e7eb; --muted:#9ca3af; --line:#334155;
    --accent:#22c55e; --accent2:#60a5fa; --accent3:#f59e0b; --accent4:#a78bfa; --accent5:#f97316;
  }
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  .wrap{max-width:980px;margin:0 auto;padding:18px}
  .card{background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:10px}
  .flow{width:100%;height:auto;display:block}
  .hint{color:var(--muted);font-size:.9rem;text-align:center;margin:.4rem 0 0}
  /* Print-friendly */
  @media print{ body{background:#fff;color:#000} .card{border-color:#bbb} }
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <!-- Single tall vertical SVG -->
    <svg class="flow" viewBox="0 0 860 2000" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Vertical flowchart of local lakehouse project">
      <defs>
        <style>
          .box{fill:#0f172a;stroke:#334155;stroke-width:1.2;rx:14;ry:14}
          .lbl{fill:#e5e7eb;font:600 15px system-ui}
          .cap{fill:#9ca3af;font:12.5px system-ui}
          .arr{stroke:#64748b;stroke-width:2.2;marker-end:url(#m);fill:none}
          .tag{font:600 11.5px system-ui;fill:#0b1022}
          .badge{fill:#0b1022;stroke:#1e293b;stroke-width:1;rx:8;ry:8}
        </style>
        <marker id="m" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
          <path d="M0 0 L10 5 L0 10 Z" fill="#64748b"/>
        </marker>
      </defs>

      <!-- Helper function via groups spacing: X positions -->
      <!-- Left column boxes centered at x=140; right-side labels near x=280 -->
      <!-- 1. RAW FILES -->
      <rect x="120" y="40" width="220" height="90" class="box"/>
      <text x="135" y="70" class="lbl">Raw Files</text>
      <text x="135" y="93" class="cap">CSV/Excel downloads</text>
      <text x="370" y="75" class="lbl">What it does →</text>
      <text x="370" y="95" class="cap">Source data you fetch locally (e.g., Online Retail)</text>

      <line x1="230" y1="130" x2="230" y2="170" class="arr"/>

      <!-- 2. SEEDS -->
      <rect x="120" y="170" width="220" height="100" class="box"/>
      <text x="135" y="200" class="lbl">dbt seed</text>
      <text x="135" y="223" class="cap">Loads CSVs → tables</text>
      <text x="370" y="208" class="lbl">What it does →</text>
      <text x="370" y="228" class="cap">Promotes files into DuckDB so models can ref() them</text>

      <line x1="230" y1="270" x2="230" y2="320" class="arr"/>

      <!-- 3. DUCKDB WAREHOUSE -->
      <rect x="120" y="320" width="220" height="100" class="box"/>
      <text x="135" y="350" class="lbl">DuckDB (warehouse)</text>
      <text x="135" y="373" class="cap">retail.duckdb file</text>
      <text x="370" y="358" class="lbl">What it does →</text>
      <text x="370" y="378" class="cap">Stores tables/views; fast analytical queries (OLAP)</text>

      <line x1="230" y1="420" x2="230" y2="470" class="arr"/>

      <!-- 4. STAGING MODEL -->
      <rect x="120" y="470" width="220" height="100" class="box"/>
      <text x="135" y="500" class="lbl">stg_retail (dbt model)</text>
      <text x="135" y="523" class="cap">Clean types, filter returns</text>
      <text x="370" y="508" class="lbl">What it does →</text>
      <text x="370" y="528" class="cap">Standardizes raw columns; minimal logic for reliability</text>

      <line x1="230" y1="570" x2="230" y2="620" class="arr"/>

      <!-- 5. DIMENSIONS -->
      <rect x="120" y="620" width="220" height="110" class="box"/>
      <text x="135" y="650" class="lbl">dim_customer & dim_product</text>
      <text x="135" y="673" class="cap">Primary keys (PKs)</text>
      <text x="370" y="658" class="lbl">What they do →</text>
      <text x="370" y="678" class="cap">Lookup tables with unique IDs & attributes</text>

      <line x1="230" y1="730" x2="230" y2="780" class="arr"/>

      <!-- 6. FACT -->
      <rect x="120" y="780" width="220" height="100" class="box"/>
      <text x="135" y="810" class="lbl">fact_sales</text>
      <text x="135" y="833" class="cap">Events (order lines)</text>
      <text x="370" y="818" class="lbl">What it does →</text>
      <text x="370" y="838" class="cap">Holds metrics (line_amount) and FKs to dims</text>

      <line x1="230" y1="880" x2="230" y2="930" class="arr"/>

      <!-- 7. TESTS -->
      <rect x="120" y="930" width="220" height="110" class="box"/>
      <text x="135" y="960" class="lbl">dbt tests (YAML)</text>
      <text x="135" y="983" class="cap">not_null • unique • relationships</text>
      <text x="370" y="968" class="lbl">What they do →</text>
      <text x="370" y="988" class="cap">Enforce PKs/FKs & no nulls; fail build on issues</text>

      <line x1="230" y1="1040" x2="230" y2="1090" class="arr"/>

      <!-- 8. GX (OPTIONAL) -->
      <rect x="120" y="1090" width="220" height="100" class="box"/>
      <text x="135" y="1120" class="lbl">Great Expectations</text>
      <text x="135" y="1143" class="cap">Checkpoint & report</text>
      <text x="370" y="1128" class="lbl">What it does →</text>
      <text x="370" y="1148" class="cap">Human‑readable validation with pass/fail HTML</text>

      <line x1="230" y1="1190" x2="230" y2="1240" class="arr"/>

      <!-- 9. AIRFLOW -->
      <rect x="120" y="1240" width="220" height="110" class="box"/>
      <text x="135" y="1270" class="lbl">Airflow DAG</text>
      <text x="135" y="1293" class="cap">seed → build → test → export</text>
      <text x="370" y="1278" class="lbl">What it does →</text>
      <text x="370" y="1298" class="cap">Schedules tasks & stops pipeline on failures</text>

      <line x1="230" y1="1350" x2="230" y2="1400" class="arr"/>

      <!-- 10. EXPORT GOLD -->
      <rect x="120" y="1400" width="220" height="100" class="box"/>
      <text x="135" y="1430" class="lbl">Export Gold Tables</text>
      <text x="135" y="1453" class="cap">Parquet/CSV in bi/</text>
      <text x="370" y="1438" class="lbl">What it does →</text>
      <text x="370" y="1458" class="cap">Makes curated data easy to consume in BI tools</text>

      <line x1="230" y1="1500" x2="230" y2="1550" class="arr"/>

      <!-- 11. POWER BI -->
      <rect x="120" y="1550" width="220" height="110" class="box"/>
      <text x="135" y="1580" class="lbl">Power BI Desktop</text>
      <text x="135" y="1603" class="cap">Get Data → Parquet/CSV</text>
      <text x="370" y="1588" class="lbl">What it does →</text>
      <text x="370" y="1608" class="cap">Load files; model relationships; create KPIs</text>

      <line x1="230" y1="1660" x2="230" y2="1710" class="arr"/>

      <!-- 12. METABASE -->
      <rect x="120" y="1710" width="220" height="110" class="box"/>
      <text x="135" y="1740" class="lbl">Metabase (optional)</text>
      <text x="135" y="1763" class="cap">DuckDB driver plugin</text>
      <text x="370" y="1748" class="lbl">What it does →</text>
      <text x="370" y="1768" class="cap">Connect to retail.duckdb; build same KPIs</text>

      <!-- End label -->
      <text x="230" y="1890" text-anchor="middle" class="cap">End of flow</text>
    </svg>
    <div class="hint">One vertical chart — text only beside components.</div>
  </div>
</div>
</body>
</html>
